<div class="flex flex-wrap -mx-3">
  <div class="flex-none w-full max-w-full px-3">
    <div
      class="relative flex flex-col min-w-0 mb-6 break-words bg-white border-0 border-transparent border-solid shadow-xl dark:bg-slate-850 dark:shadow-dark-xl rounded-2xl bg-clip-border px-3 py-3">
      <div class="flex flex-wrap -mx-3">
        <div class="flex items-center flex-none w-1/2 max-w-full px-5">
          <h6 class="dark:text-white">Category table</h6>
        </div>
        <div class="flex-none w-1/2 max-w-full px-3 text-right">
          <a class="inline-block px-5 py-2.5 font-bold leading-normal text-center text-white align-middle transition-all bg-transparent rounded-lg cursor-pointer text-size-sm ease-in shadow-md bg-150 bg-gradient-to-tl from-zinc-800 to-zinc-700 dark:bg-gradient-to-tl dark:from-slate-750 dark:to-gray-850 hover:shadow-xs active:opacity-85 hover:-translate-y-px tracking-tight-rem bg-x-25"
            href="/category/insert"> <i class="fas fa-plus"> </i>&nbsp;&nbsp;Add Type</a>
        </div>
      </div>
      <div class="flex-auto px-0 pt-0 pb-2">
        <div class="p-0 overflow-x-auto">
          <table class="items-center w-full mb-0 align-top border-collapse dark:border-white/40 text-slate-500">
            <thead class="align-bottom">
              <tr>
                <th
                  class="px-6 py-3 pl-2 font-bold text-left uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-size-xxs border-b-solid tracking-none whitespace-nowrap text-slate-400 opacity-70"
                  style="color: black;">
                  Name type</th>
                <th
                  class="px-6 py-3 font-bold text-left     uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-size-xxs border-b-solid tracking-none whitespace-nowrap text-slate-400 opacity-70"
                  style="color: black;">
                  Description</th>
                <th style="color: black;"
                  class="px-6 py-3 font-bold text-center uppercase align-middle bg-transparent border-b border-collapse shadow-none dark:border-white/40 dark:text-white text-size-xxs border-b-solid tracking-none whitespace-nowrap text-slate-400 opacity-70">
                  Action</th>
              </tr>
            </thead>
            {{#each categories}}
            <tbody>
              <tr>
                <td
                  class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent">
                  <h7 class="mb-0 leading-normal dark:text-white text-size-sm">{{this.name}}</h7>
                </td>
                <td
                  class="p-2 align-middle bg-transparent border-b dark:border-white/40 whitespace-nowrap shadow-transparent">
                  <h7 class="mb-0 leading-normal dark:text-white text-size-xs-sm">
                    {{this.description}}
                  </h7>
                </td>
                <td>
                  <div class="ml-auto text-center border-b dark:border-white/40">
                    <button onclick="goEdit('{{this._id}}')"
                      class="inline-block dark:text-white px-4 py-2.5 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-normal text-size-sm ease-in bg-150 hover:-translate-y-px active:opacity-85 bg-x-25 text-slate-700"><i class="mr-2 fas fa-pencil-alt text-slate-700"
                        aria-hidden="true"></i>Edit</button>
                    </div>
                </td>
              </tr>
            </tbody>
            {{/each}}
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{{!-- <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Confirm action</h4>
      </div>
      <div class="modal-body">
        <div class="panel-body">
          <h3>Are you sure?</h3>
          <div class="form-group modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" onclick="onDelete()" class="btn btn-primary">Yes</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> --}}

<script>

  const goEdit = (_id) => {


    window.location.href = `/category/${_id}/edit/`
  }


  let deleted_id;

  const goDelete = (id) => {
    deleted_id = id;
  }

  const fetchAPI = async (url, option) => {
    const res = await fetch(url, option);
    return res.json();
  }

  const onDelete = async (_id) => {
    const url = `http://localhost:3000/category/${_id}/delete`;
    const option = {
      method: 'delete',
      headers: { 'Content-Type': 'application/json' }
    }
    try {
      await fetchAPI(url, option);
      window.location.href = '/category';
    } catch (e) { console.log('Delete error: ', e) }
  }
</script>